# **类-Rust 可视化编译器 (Rust-like Visual Compiler)**

这是一个为编译原理课程设计的、功能完备的编译器前端项目。它能够对一种类-Rust语法的简化语言进行完整的**词法分析**、**语法分析**、**语义分析**，并最终生成**四元式**中间代码。整个编译流程通过一个使用Python和tkinter构建的图形用户界面(GUI)进行可视化展示。

## **✨ 项目亮点 (Core Features)**

* **图形用户界面 (GUI)**: 提供一个直观、易用的可视化界面，能够分步执行并展示每一个编译阶段的结果。  
* **分步分析与一键执行**: 用户可以逐步点击按钮，观察从词法分析到中间代码生成的每一步，也可以直接运行完整流程。  
* **强大的错误提示**: 能够在语法和语义层面检测多种错误，并在界面上给出清晰的提示。  
* **直观的AST可视化**: 集成 **Graphviz**，能够将生成的抽象语法树(AST)动态渲染为可缩放、可交互的树状图。  
* **清晰的中间代码输出**: 将最终成果以结构清晰的**四元式**表格形式呈现。

## **📸 可视化界面展示 (Visual Showcase)**

我们设计的GUI旨在将抽象的编译过程变得直观易懂。

#### **主界面**

左侧为功能完备的代码编辑器，右侧为多标签页的结果展示区，整体布局清晰，操作方便。

\[此处粘贴你的GUI主界面截图\]

#### **多阶段结果分析**

用户可以方便地切换标签页，查看词法、语法、语义分析和四元式的输出结果。

\[此处粘贴一个展示了词法、语法、四元式结果的GUI截图\]

#### **抽象语法树 (AST) 可视化**

生成的AST图像支持交互式的缩放与平移，便于分析复杂的语法结构。

\[此处粘贴你的AST图像展示截图\]

## **🚀 如何使用 (How to Use)**

在开始之前，请确保你的环境中已经安装了 **Python 3.11+**。

#### **1\. 环境配置**

首先，克隆或下载本仓库至本地。然后进入项目根目录，通过以下命令安装所需的依赖库：
'''
pip install \-r requirements.txt
'''
#### **2\. 运行程序**

本项目依赖 **Graphviz** 进行AST的可视化。我们已将Windows版本的Graphviz二进制文件打包在graphviz\_bin目录中。

* **重要提示**: 请确保 graphviz\_bin 文件夹与 gui.py 位于同一目录下。  
* 在项目根目录下，执行以下命令来启动GUI应用程序：

python gui.py

#### **3\. 使用步骤**

程序启动后，你将看到一个预置了示例代码的界面。你可以直接使用或修改代码，然后按照界面左侧按钮的顺序进行操作：

1. **点击 "1. 进行词法分析"**: 在右侧“词法分析结果”标签页中查看生成的Token序列。  
2. **点击 "2. 进行语法分析"**: 在“语法分析结果”标签页中查看AST的文本结构或语法错误。  
3. **点击 "3. 进行语义分析与四元式生成"**:  
   * 如果代码存在逻辑错误，将在“语义分析与四元式”标签页上方看到详细的错误报告。  
   * 如果代码无误，下方表格将显示生成的四元式中间代码。  
4. **点击 "4. 生成 AST 图像"**: 在“AST 图像”标签页中查看可视化的语法树，并可使用按钮进行缩放。

## **✅ 功能实现 (Implemented Features)**

我们的编译器已经支持了类-Rust语言的一系列核心语法和特性。

#### **基础功能**

* **程序与函数**:  
  * 完整的函数定义 fn name(params) \-\> type { ... }  
  * 支持函数参数和返回值类型声明  
  * return 语句  
* **变量与赋值**:  
  * 使用 let 和 let mut 进行变量声明  
  * 独立的赋值语句  
* **表达式**:  
  * 支持整数字面量  
  * 支持 \+, \-, \*, / 等算术运算  
  * 支持 \==, \!=, \<, \>, \<=, \>= 等比较运算  
  * 支持函数调用表达式 func(args)  
* **控制流**:  
  * if-else 条件分支结构  
  * while 循环结构

#### **拓展功能**

* **声明与赋值合并**: 支持 let mut x: i32 \= 1; 这样在一行内完成声明、类型标注和初始化的操作。  
* **不可变变量**: 实现了Rust的核心特性之一，即默认变量不可变。只有使用 mut 关键字声明的变量才能被重新赋值。  
* **无限循环 loop**: 支持使用 loop { ... } 创建无限循环。  
* **循环控制**: 在 while 和 loop 循环中，完全支持使用 break 和 continue 关键字来控制循环流程。

## **🛠️ 技术栈与实现简介**

* **编程语言**: Python 3.11  
* **GUI框架**: tkinter  
* **AST可视化**: graphviz & Pillow  
* **核心分析方法**:  
  * **词法分析**: 手动编写的、基于DFA思想的词法分析器。  
  * **语法分析**: 自上而下的混合解析策略（递归下降 \+ Pratt解析器）。  
  * **语义分析**: 基于访问者模式的单遍深度优先遍历。  
  * **中间代码**: 生成四元式。

## **展望 (Future Work)**

* **后端开发**: 基于当前生成的四元式，构建控制流图(CFG)，进行代码优化，并最终生成目标代码。  
* **功能拓展**: 支持更丰富的Rust特性，如数组、元组、引用与解引用等。  
* **错误恢复**: 引入更成熟的错误恢复机制，使编译器在遇到错误后能继续分析，一次性报告多个问题。
